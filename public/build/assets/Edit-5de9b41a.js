import{_ as z,o,b as r,d as t,t as _,y as D,P as B,g as d,Q as F,F as k,j as w,p as C,A as I,k as Q,R as V,s as A,v as G,C as H,z as J,e as K,B as W}from"./app-25ba0aa8.js";import{u as X}from"./roles-e9e38390.js";import{d as E,u as Y,a as Z,r as ee,m as te}from"./rules-2bfff6b0.js";const ae={class:"container"},se=["value"],ie={class:"middle"},ne=["value"],le={__name:"DualListBox",props:{leftLabel:{type:String,required:!0},rightLabel:{type:String,required:!0},leftData:{type:Array,required:!0},rightData:{type:Array,required:!0}},emits:["onChangeList"],setup(P,{emit:n}){let s=[],i=[];const g=n,a=P;function y(){if(!i.length)return;for(let e=i.length;e>0;e--){let c=a.rightData.indexOf(i[e-1]);a.rightData.splice(c,1),a.leftData.push(i[e-1]),i.pop()}let u=a.leftData,l=a.rightData;g("onChangeList",{leftData:u,rightData:l})}function b(){if(!s.length)return;for(let e=s.length;e>0;e--){let c=a.leftData.indexOf(s[e-1]);a.leftData.splice(c,1),a.rightData.push(s[e-1]),s.pop()}let u=a.leftData,l=a.rightData;g("onChangeList",{leftData:u,rightData:l})}return(u,l)=>(o(),r("div",ae,[t("div",null,[t("h2",null,_(a.leftLabel),1),D(t("select",{class:"form-select",multiple:"","onUpdate:modelValue":l[0]||(l[0]=e=>F(s)?s.value=e:s=e),onDblclick:b},[(o(!0),r(k,null,w(a.leftData,(e,c)=>(o(),r("option",{value:e,key:e.id},_(e.name),9,se))),128))],544),[[B,d(s)]])]),t("div",ie,[t("button",{class:"btn btn-primary",onClick:C(b,["prevent"])},"=>"),t("button",{class:"btn btn-primary",onClick:C(y,["prevent"])},"<=")]),t("div",null,[t("h2",null,_(a.rightLabel),1),D(t("select",{class:"form-select",multiple:"","onUpdate:modelValue":l[1]||(l[1]=e=>F(i)?i.value=e:i=e),onDblclick:y},[(o(!0),r(k,null,w(a.rightData,(e,c)=>(o(),r("option",{value:e,key:e.id},_(e.name),9,ne))),128))],544),[[B,d(i)]])])]))}},oe=z(le,[["__scopeId","data-v-b4e8872b"]]),re={class:"row justify-content-center my-5"},de={class:"col"},ue={class:"card border-0 shadow-sm"},ce={class:"card-body"},me={class:"mb-3"},pe=t("label",{for:"post-title",class:"form-label"}," Title ",-1),_e={class:"form-outline w-25"},fe={class:"text-danger mt-1"},he={class:"text-danger mt-1"},ve={class:"mt-4"},ge=["disabled"],be={class:""},De={key:0},ye={key:1},we={__name:"Edit",async setup(P){let n,s;E("required",ee),E("min",te);const i={name:"required|min:3"},{validate:g,errors:a,resetForm:y}=Y({validationSchema:i}),{value:b}=Z("name",null,{initialValue:""}),{role:u,updateRolePermissions:l,getRole:e,updateRole:c,validationErrors:M,isLoading:x}=X(),f=I({name:b}),R=Q();let L=([n,s]=V(()=>axios.get("/api/permissions/")),n=await n,s(),n),U=L.data.data;L=([n,s]=V(()=>axios.get("/api/role-permissions/"+R.params.id)),n=await n,s(),n);let S=L.data.data,O=T(U,S),$=A(O),q=A(S);function j(){g().then(h=>{if(h.valid){let m=q.value.map(p=>p.id);l(f,m)}})}function N(h){}G(()=>{e(R.params.id)}),H(()=>{f.id=u.value.id,f.name=u.value.name});function T(h,m){return h.filter(p=>!m.some(v=>p.id===v.id))}return(h,m)=>{var p;return o(),r("div",re,[t("div",de,[t("div",ue,[t("div",ce,[t("form",{onSubmit:C(j,["prevent"])},[t("div",me,[pe,t("div",_e,[D(t("input",{"onUpdate:modelValue":m[0]||(m[0]=v=>f.name=v),id:"post-title",type:"text",class:"form-control"},null,512),[[J,f.name]])]),t("div",fe,_(d(a).name),1),t("div",he,[(o(!0),r(k,null,w((p=d(M))==null?void 0:p.name,v=>(o(),r("div",null,_(v),1))),256))])]),K(oe,{leftLabel:"Available Permissions",rightLabel:"Current Permissions",leftData:d($),rightData:d(q),onOnChangeList:N},null,8,["leftData","rightData"]),t("div",ve,[t("button",{disabled:d(x),class:"btn btn-primary"},[D(t("div",be,null,512),[[W,d(x)]]),d(x)?(o(),r("span",De,"Processing...")):(o(),r("span",ye,"Update"))],8,ge)])],32)])])])])}}};export{we as default};
